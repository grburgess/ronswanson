<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Intro &mdash; ronswanson  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/dark.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../_static/dark_mode_js/default_dark.js"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API" href="../api/API.html" />
    <link rel="prev" title="Welcome to ronswanson’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> ronswanson
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Intro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Example-with-a-Band-function">Example with a Band function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#The-Simulation-class">The Simulation class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#The-Simulation-Builder">The Simulation Builder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#SLURM-and-advanced-options">SLURM and advanced options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#The-Database">The Database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#User-configuration">User configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/API.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/API.html#ronswanson">ronswanson</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ronswanson</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Intro</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Intro">
<h1>Intro<a class="headerlink" href="#Intro" title="Permalink to this heading"></a></h1>
<p>So you need to build a table model? 3ML via astromodels provides you with nice facilities to accomplish this task. But often, we need to interface with computationally expensive simulations and require many runs of these simulations. This is a very generic task and Ron Swanson wants to make things as simple as possible for you. Making things complicated is annoying.</p>
<img alt="alt text" src="https://raw.githubusercontent.com/grburgess/ronswanson/master/docs/media/mad.jpg" />
<section id="Example-with-a-Band-function">
<h2>Example with a Band function<a class="headerlink" href="#Example-with-a-Band-function" title="Permalink to this heading"></a></h2>
<p>Let’s say we want to make a table model from a Band function.</p>
<p>We pick a parameter grid and a grid of energies for our simulation. We can enter these in a YAML file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">alpha</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">custom</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">  </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;linear&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_points</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>

<span class="nt">beta</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">custom</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-3</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-2</span><span class="w"></span>
<span class="w">  </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;linear&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_points</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>

<span class="nt">epeak</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">custom</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"></span>
<span class="w">  </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">50.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">69.74</span><span class="w"> </span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">97.29</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">135.72</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">189.32</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">264.097</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">368.4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">513.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">716.87</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1000.</span><span class="p p-Indicator">]</span><span class="w"></span>

<span class="nt">energy_grid</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">custom</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<span class="w">  </span><span class="nt">vmax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span><span class="w"></span>
<span class="w">  </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;log&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_points</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span><span class="w"></span>
</pre></div>
</div>
<p>As can be seen, we can specify the parameter/energy grids ourselves, or we can specify their ranges and let it be done for us.</p>
<p>It is possible that a simulation outputs more than one type of array (photons, electrons, neutrinos, etc.). In this case, each output may have its own energy grid. These can be specified as <code class="docutils literal notranslate"><span class="pre">energy_grid_0</span></code>, <code class="docutils literal notranslate"><span class="pre">energy_grid_1</span></code>…<code class="docutils literal notranslate"><span class="pre">energy_grid_n</span></code>. More on how to grab the output from these below.</p>
<section id="The-Simulation-class">
<h3>The Simulation class<a class="headerlink" href="#The-Simulation-class" title="Permalink to this heading"></a></h3>
<p>Now we need to make a class for the simulation. We will inherit from the simulation class and specify a <code class="docutils literal notranslate"><span class="pre">_run_call</span></code> function that tells the program how to run the simulation for a given set of parameters. This function <strong>must</strong> return a dictionary of arrays of photon / particle fluxes for the given energies. The keys of the dictionary should be <code class="docutils literal notranslate"><span class="pre">output_0</span></code>, <code class="docutils literal notranslate"><span class="pre">output_1</span></code>…<code class="docutils literal notranslate"><span class="pre">output_n</span></code> for each type of output corresponding to the energy grids above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">astromodels</span> <span class="kn">import</span> <span class="n">Band</span>
<span class="kn">import</span> <span class="nn">ronswanson</span> <span class="k">as</span> <span class="nn">dukesilver</span>


<span class="k">class</span> <span class="nc">BandSimulation</span><span class="p">(</span><span class="n">dukesilver</span><span class="o">.</span><span class="n">Simulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">simulation_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">parameter_set</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
        <span class="n">energy_grid</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">out_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">simulation_id</span><span class="p">,</span> <span class="n">parameter_set</span><span class="p">,</span> <span class="n">energy_grid</span><span class="p">,</span> <span class="n">out_file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_run_call</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">Band</span><span class="p">(</span>
            <span class="n">K</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parameter_set</span><span class="p">[</span><span class="s2">&quot;alpha&quot;</span><span class="p">],</span>
            <span class="n">beta</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parameter_set</span><span class="p">[</span><span class="s2">&quot;beta&quot;</span><span class="p">],</span>
            <span class="n">xp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parameter_set</span><span class="p">[</span><span class="s2">&quot;epeak&quot;</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">output_0</span><span class="o">=</span><span class="n">b</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_energy_grid</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="The-Simulation-Builder">
<h3>The Simulation Builder<a class="headerlink" href="#The-Simulation-Builder" title="Permalink to this heading"></a></h3>
<p>Now we need to tell the simulation builder a few things so it can construct our files for us. We have stored this YAML file in the repo itself. You should use your own!</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SimulationBuilder</span></code> class takes a parameter grid, the name of the file that will be created, the import line for the custom simulation class, the number of cores and nodes to execute on.</p>
<p>We configure this with a YAML file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># the import line to get our simulation</span><span class="w"></span>
<span class="c1"># we ALWAYS import as Simulation</span><span class="w"></span>
<span class="nt">import_line</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;from</span><span class="nv"> </span><span class="s">ronswanson.band_simulation</span><span class="nv"> </span><span class="s">import</span><span class="nv"> </span><span class="s">BandSimulation</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">Simulation&quot;</span><span class="w"></span>

<span class="c1"># the parameter grid</span><span class="w"></span>
<span class="nt">parameter_grid</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test_params.yml&quot;</span><span class="w"></span>

<span class="c1"># name of our database</span><span class="w"></span>
<span class="nt">out_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database.h5</span><span class="w"></span>

<span class="c1"># clean out the simulation directory after</span><span class="w"></span>
<span class="c1"># the run. It is defaulted to yes</span><span class="w"></span>
<span class="nt">clean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"></span>

<span class="nt">simulation</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of multi-process jobs</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_mp_jobs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span><span class="w"></span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ronswanson</span>

<span class="n">sb</span> <span class="o">=</span> <span class="n">ronswanson</span><span class="o">.</span><span class="n">SimulationBuilder</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="s2">&quot;sim_build.yml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">17:20:05 </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> The naima package is not available. Models that depend on it will not be         </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/functions.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">functions.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/functions.py#48" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">48</span></a>
<span style="color: #00ff00; text-decoration-color: #00ff00">         </span>         <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold">available                                                                         </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">               </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> The GSL library or the pygsl wrapper cannot be loaded. Models that depend on it  </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/functions.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">functions.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/functions.py#69" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">69</span></a>
<span style="color: #00ff00; text-decoration-color: #00ff00">         </span>         <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold">will not be available.                                                            </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">               </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> The ebltable package is not available. Models that depend on it will not be     </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/absorption.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">absorption.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/functions_1D/absorption.py#36" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">36</span></a>
<span style="color: #00ff00; text-decoration-color: #00ff00">         </span>         <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold">available                                                                        </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">                </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">17:20:06 </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of K to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of K to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of K to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of K to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of F to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> We have set the min_value of K to </span><span style="color: #c0c0c0; text-decoration-color: #c0c0c0; font-weight: bold">1e-99</span><span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> because there was a postive transform   </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">parameter.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/core/parameter.py#704" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">704</span></a>
</pre></div>
</div>
<p>Now a python file will be written to the disk which you can run to create your simulation runs. we can have a look at the file.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from ronswanson.band_simulation import BandSimulation as Simulation
from joblib import Parallel, delayed
from ronswanson import ParameterGrid

pg = ParameterGrid.from_yaml(&#39;/Users/jburgess/coding/projects/ronswanson/parameters.yml&#39;)
def func(i):
    params = pg.at_index(i)
    simulation = Simulation(i, params, pg.energy_grid.grid,&#39;/Users/jburgess/coding/projects/ronswanson/database.h5&#39;)
    simulation.run()

iteration = [i for i in range(0, pg.n_points)]

Parallel(n_jobs=8)(delayed(func)(i) for i in iteration)
</pre></div>
</div>
<!-- #region --><p>Now this simply uses <code class="docutils literal notranslate"><span class="pre">joblib</span></code> to farm out the iterations over the parameter combinations. If iterations are to also be divided across HPC nodes, the python script will be modified and an associated <code class="docutils literal notranslate"><span class="pre">SLURM</span></code> script will be generated.</p>
<section id="SLURM-and-advanced-options">
<h4>SLURM and advanced options<a class="headerlink" href="#SLURM-and-advanced-options" title="Permalink to this heading"></a></h4>
<p>Configuring for SLURM and SBATCH systems is similar, but there are a few more options. <code class="docutils literal notranslate"><span class="pre">ronswanson</span></code> will set up bash scripts that will submit jobs to complete the simulations and then gather them into a database.</p>
<p>Here is an example script:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># the import line to get our simulation</span><span class="w"></span>
<span class="c1"># we ALWAYS import as Simulation</span><span class="w"></span>
<span class="nt">import_line</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;from</span><span class="nv"> </span><span class="s">ronswanson.band_simulation</span><span class="nv"> </span><span class="s">import</span><span class="nv"> </span><span class="s">BandSimulation</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">Simulation&quot;</span><span class="w"></span>

<span class="c1"># the parameter grid</span><span class="w"></span>
<span class="nt">parameter_grid</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test_params.yml&quot;</span><span class="w"></span>

<span class="c1"># name of our database</span><span class="w"></span>
<span class="nt">out_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database.h5</span><span class="w"></span>

<span class="nt">simulation</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of multi-process jobs PER node</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_mp_jobs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of cpus to request per node (leave room for threads)</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_cores_per_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">72</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of runs per node</span><span class="w"></span>
<span class="w">  </span><span class="c1"># here, the 9 mp jobs will take turns with these 500 runs</span><span class="w"></span>
<span class="w">  </span><span class="nt">run_per_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span><span class="w"></span>

<span class="w">  </span><span class="c1"># the switch to say we are performing SLURM job</span><span class="w"></span>
<span class="w">  </span><span class="nt">use_nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"></span>

<span class="w">  </span><span class="c1"># optional maximum number of nodes to request</span><span class="w"></span>
<span class="w">  </span><span class="c1"># if more than this are required, multiple</span><span class="w"></span>
<span class="w">  </span><span class="c1"># submission scripts are generated</span><span class="w"></span>
<span class="w">  </span><span class="nt">max_nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w"></span>

<span class="w">  </span><span class="c1"># the max run time for each job in the array</span><span class="w"></span>
<span class="w">  </span><span class="nt">time</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">hrs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w"></span>
<span class="w">    </span><span class="nt">sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>

<span class="nt">gather</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="c1"># after the simulations run</span><span class="w"></span>
<span class="w">  </span><span class="c1"># you submit and MPI job that collects the simualtions</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of simulations to collect per MPI rank</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_gather_per_core</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>

<span class="w">  </span><span class="c1"># number of cpus per node</span><span class="w"></span>
<span class="w">  </span><span class="nt">n_cores_per_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">70</span><span class="w"></span>

<span class="w">  </span><span class="c1"># maximum job time</span><span class="w"></span>
<span class="w">  </span><span class="nt">time</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">hrs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">    </span><span class="nt">sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
</pre></div>
</div>
<p>Additional configuration of SLURM jobs can be handle with the <code class="docutils literal notranslate"><span class="pre">ronswanson</span></code> configuration.</p>
</section>
</section>
<section id="The-Database">
<h3>The Database<a class="headerlink" href="#The-Database" title="Permalink to this heading"></a></h3>
<p>Upon running the script, an HDF5 database of the runs is created which contains all the information needed to build a table model in <code class="docutils literal notranslate"><span class="pre">3ML</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ronswanson.utils.package_data</span> <span class="kn">import</span> <span class="n">get_path_of_data_file</span>
<span class="kn">from</span> <span class="nn">ronswanson</span> <span class="kn">import</span> <span class="n">Database</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">get_path_of_data_file</span><span class="p">(</span><span class="s2">&quot;test_database.h5&quot;</span><span class="p">))</span>
<span class="n">db</span><span class="o">.</span><span class="n">parameter_ranges</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;alpha&#39;, array([-1. , -0.5,  0. ,  0.5,  1. ], dtype=float32)),
             (&#39;beta&#39;,
              array([-3.  , -2.75, -2.5 , -2.25, -2.  ], dtype=float32)),
             (&#39;epeak&#39;,
              array([  50.   ,   69.74 ,   97.29 ,  135.72 ,  189.32 ,  264.097,
                      368.4  ,  513.9  ,  716.87 , 1000.   ], dtype=float32))])
</pre></div></div>
</div>
<p>Now we can use the database to construct and save a table model for <code class="docutils literal notranslate"><span class="pre">3ML</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">table_model</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">to_3ml</span><span class="p">(</span><span class="s2">&quot;my_model&quot;</span><span class="p">,</span> <span class="s2">&quot;a new model for 3ML&quot;</span><span class="p">)</span>
<span class="n">table_model</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">         </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> Energy unit is not a Quantity instance, so units has not been provided.    </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/template_model.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">template_model.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/template_model.py#106" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">106</span></a>
<span style="color: #00ff00; text-decoration-color: #00ff00">         </span>         <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold">Using keV.                                                                  </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">                     </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "d796e4d69c8348379a2022dadb943f8e", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<ul>

<li>description: a new model for 3ML</li>

<li>formula: n.a.</li>

<li>parameters:
<ul>

<li>K:
<ul>

<li>value: 1.0</li>

<li>desc: None</li>

<li>min_value: None</li>

<li>max_value: None</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.1</li>

<li>free: True</li>

</ul>

</li>

<li>scale:
<ul>

<li>value: 1.0</li>

<li>desc: None</li>

<li>min_value: None</li>

<li>max_value: None</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.1</li>

<li>free: True</li>

</ul>

</li>

<li>alpha:
<ul>

<li>value: 0.0</li>

<li>desc: None</li>

<li>min_value: -1.0</li>

<li>max_value: 1.0</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.1</li>

<li>free: True</li>

</ul>

</li>

<li>beta:
<ul>

<li>value: -2.5</li>

<li>desc: None</li>

<li>min_value: -3.0</li>

<li>max_value: -2.0</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.25</li>

<li>free: True</li>

</ul>

</li>

<li>epeak:
<ul>

<li>value: 226.70849609375</li>

<li>desc: None</li>

<li>min_value: 50.0</li>

<li>max_value: 1000.0</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 22.670849609375</li>

<li>free: True</li>

</ul>

</li>

</ul>

</li>

</ul></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astromodels</span> <span class="kn">import</span> <span class="n">Band</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
<p>We can compare our table model with the Band function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">ene</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">geomspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Band</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.6</span>
<span class="n">b</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.5</span>
<span class="n">b</span><span class="o">.</span><span class="n">xp</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">b</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="mf">1.05</span>

<span class="n">table_model</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.6</span>
<span class="n">table_model</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.5</span>
<span class="n">table_model</span><span class="o">.</span><span class="n">epeak</span> <span class="o">=</span> <span class="mi">250</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span>
    <span class="n">ene</span><span class="p">,</span> <span class="n">ene</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="n">table_model</span><span class="p">(</span><span class="n">ene</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#33FFC4&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;table&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">ene</span><span class="p">,</span> <span class="n">ene</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="n">b</span><span class="p">(</span><span class="n">ene</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#C989FB&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;band&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;energy&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;vFv&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f90fdc61430&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_ronswanson_14_1.png" src="../_images/notebooks_ronswanson_14_1.png" />
</div>
</div>
<p>Great! That was way easier than programming everything yourself.</p>
<img alt="alt text" src="https://raw.githubusercontent.com/grburgess/ronswanson/master/docs/media/happy.jpeg" />
<p>Suppose we did not want to use all the values in the parameter ranges we have simulated. Bigger interpolation tables take up memory when fitting.</p>
<p>We can select a subset of the parameter ranges when building the table</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">selection</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">selection</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">vmax</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">selection</span><span class="p">[</span><span class="s1">&#39;epeak&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">700</span><span class="p">)</span>

<span class="n">table_model_small</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">to_3ml</span><span class="p">(</span>
    <span class="s2">&quot;my_model_small&quot;</span><span class="p">,</span> <span class="s2">&quot;a new model for 3ML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">selection</span>
<span class="p">)</span>
<span class="n">table_model_small</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">17:20:10 </span><span style="color: #af5fd7; text-decoration-color: #af5fd7">WARNING </span> <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold"> Energy unit is not a Quantity instance, so units has not been provided.    </span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/template_model.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">template_model.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///opt/hostedtoolcache/Python/3.8.13/x64/lib/python3.8/site-packages/astromodels/functions/template_model.py#106" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">106</span></a>
<span style="color: #00ff00; text-decoration-color: #00ff00">         </span>         <span style="color: #c6c6c6; text-decoration-color: #c6c6c6; font-weight: bold">Using keV.                                                                  </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">                     </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "a9660f30f15746389daf099000006a2f", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<ul>

<li>description: a new model for 3ML</li>

<li>formula: n.a.</li>

<li>parameters:
<ul>

<li>K:
<ul>

<li>value: 1.0</li>

<li>desc: None</li>

<li>min_value: None</li>

<li>max_value: None</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.1</li>

<li>free: True</li>

</ul>

</li>

<li>scale:
<ul>

<li>value: 1.0</li>

<li>desc: None</li>

<li>min_value: None</li>

<li>max_value: None</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.1</li>

<li>free: True</li>

</ul>

</li>

<li>alpha:
<ul>

<li>value: -0.5</li>

<li>desc: None</li>

<li>min_value: -1.0</li>

<li>max_value: 0.0</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.05</li>

<li>free: True</li>

</ul>

</li>

<li>beta:
<ul>

<li>value: -2.5</li>

<li>desc: None</li>

<li>min_value: -3.0</li>

<li>max_value: -2.0</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 0.25</li>

<li>free: True</li>

</ul>

</li>

<li>epeak:
<ul>

<li>value: 368.3999938964844</li>

<li>desc: None</li>

<li>min_value: 264.09698486328125</li>

<li>max_value: 513.9000244140625</li>

<li>unit: </li>

<li>is_normalization: False</li>

<li>delta: 36.83999938964844</li>

<li>free: True</li>

</ul>

</li>

</ul>

</li>

</ul></div>
</div>
<p>Awesome! Now go enjoy your weekend.</p>
<img alt="alt text" src="https://raw.githubusercontent.com/grburgess/ronswanson/master/docs/media/enjoy.jpg" />
</section>
</section>
<section id="User-configuration">
<h2>User configuration<a class="headerlink" href="#User-configuration" title="Permalink to this heading"></a></h2>
<p>A simple YAML configuration is stored in <code class="docutils literal notranslate"><span class="pre">~/.config/ronswanson/ronswanson_config.yml</span></code>. It allows for configuring the log as well as putting default SLURM configuration parameters.</p>
<p>An example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">logging</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="s">&#39;on&#39;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on</span><span class="w"></span>
<span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span><span class="w"></span>
<span class="nt">slurm</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="c1"># where to send SLURM emails</span><span class="w"></span>
<span class="w">  </span><span class="nt">user_email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_email.com</span><span class="w"></span>

<span class="w">  </span><span class="c1"># modules to be loaded for MPI jobs (gather script)</span><span class="w"></span>
<span class="w">  </span><span class="nt">mpi_modules</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;intel/21.4.0&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;impi/2021.4&#39;</span><span class="p p-Indicator">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&#39;anaconda/3/2021.11&#39;</span><span class="p p-Indicator">,</span><span class="s">&#39;hdf5-mpi/1.12.2&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;mpi4py/3.0.3&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;h5py-mpi/2.10&#39;</span><span class="p p-Indicator">]</span><span class="w"></span>

<span class="w">  </span><span class="c1"># modules to load for simulation jobs</span><span class="w"></span>
<span class="w">  </span><span class="nt">modules</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;intel/21.4.0&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;impi/2021.4&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;anaconda/3/2021.11&#39;</span><span class="p p-Indicator">,</span><span class="s">&#39;hdf5-serial/1.12.2&#39;</span><span class="p p-Indicator">]</span><span class="w"></span>

<span class="w">  </span><span class="c1"># the python binary for running the simulation jobs</span><span class="w"></span>
<span class="w">  </span><span class="nt">python</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;python3&quot;</span><span class="w"></span>

<span class="w">  </span><span class="c1"># where to store the simulations before</span><span class="w"></span>
<span class="w">  </span><span class="c1"># database creation (default will be the directory where the code is run)</span><span class="w"></span>
<span class="w">  </span><span class="nt">store_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ptmp/jburgess</span><span class="w"></span>
</pre></div>
</div>
<p>The configuration can be modified on the fly.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ronswanson</span> <span class="kn">import</span> <span class="n">ronswanson_config</span><span class="p">,</span> <span class="n">show_configuration</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_configuration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">config</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┣━━ </span><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">logging</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┃   ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">on: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">True</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┃   ┗━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">level: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">WARNING</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┗━━ </span><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">slurm</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">user_email: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">user@email.com</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">modules: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">mpi_modules: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">python: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">python</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┗━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">store_dir: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ronswanson_config</span><span class="o">.</span><span class="n">slurm</span><span class="o">.</span><span class="n">user_email</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;user@email.com&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ronswanson_config</span><span class="o">.</span><span class="n">slurm</span><span class="o">.</span><span class="n">user_email</span> <span class="o">=</span> <span class="s2">&quot;workemail@email.com&quot;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_configuration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">config</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┣━━ </span><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">logging</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┃   ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">on: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">True</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┃   ┗━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">level: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">WARNING</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">┗━━ </span><span style="color: #af5fd7; text-decoration-color: #af5fd7; font-weight: bold">slurm</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">user_email: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">workemail@email.com</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">modules: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">mpi_modules: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┣━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">python: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">python</span>
<span style="color: #af5fd7; text-decoration-color: #af5fd7">    ┗━━ </span><span style="color: #00ffaf; text-decoration-color: #00ffaf; font-weight: bold">store_dir: </span><span style="color: #5f87ff; text-decoration-color: #5f87ff; font-weight: bold">None</span>
</pre></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"00ad284355e74842a506610f5682cf52": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "099b668a8b524c62a5a371e2c7d81ab1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "28bcb558451e48098b6d60c646c7313a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "2be95f38c22f4c92a6c57a7d8e69540f": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "5c327f32497448a5b4e5743ab2f8f644": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "610734464a6048de91122df7c702fe70": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_e0c73a9b69d44abbba1f465b2b4de09d", "placeholder": "\u200b", "style": "IPY_MODEL_099b668a8b524c62a5a371e2c7d81ab1", "tabbable": null, "tooltip": null, "value": " 250/250 [00:00&lt;00:00, 1402.56it/s]"}}, "6353cf2c6c784f1c966cc8c0215d8374": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_e52d674dce684792a207ad061a75f7cd", "max": 250.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_b22245f3b5dd4fb5a5af8bb502a2f831", "tabbable": null, "tooltip": null, "value": 250.0}}, "7e84c69a1ad0446c8b5d4e295c426bf9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_00ad284355e74842a506610f5682cf52", "placeholder": "\u200b", "style": "IPY_MODEL_bf03b8af50f844389c657d68401cc4f0", "tabbable": null, "tooltip": null, "value": "100%"}}, "7f3a307df27e4893899a55719bca5650": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "8c5d66f8ec6e406b82128a89ce50f4e6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "92fc1d0cc28140668d9a17e11496bfb1": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a9660f30f15746389daf099000006a2f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_7e84c69a1ad0446c8b5d4e295c426bf9", "IPY_MODEL_f8847563ef694f3da9b694d710055c35", "IPY_MODEL_c0a75373d10243e6964cceeac360ff06"], "layout": "IPY_MODEL_c46171a887ad403bb48bf69b4be38c6a", "tabbable": null, "tooltip": null}}, "b22245f3b5dd4fb5a5af8bb502a2f831": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "bf03b8af50f844389c657d68401cc4f0": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "c0a75373d10243e6964cceeac360ff06": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_2be95f38c22f4c92a6c57a7d8e69540f", "placeholder": "\u200b", "style": "IPY_MODEL_7f3a307df27e4893899a55719bca5650", "tabbable": null, "tooltip": null, "value": " 45/45 [00:00&lt;00:00, 865.07it/s]"}}, "c46171a887ad403bb48bf69b4be38c6a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d796e4d69c8348379a2022dadb943f8e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_f1cb0512d0cd407584b277ec150eb829", "IPY_MODEL_6353cf2c6c784f1c966cc8c0215d8374", "IPY_MODEL_610734464a6048de91122df7c702fe70"], "layout": "IPY_MODEL_5c327f32497448a5b4e5743ab2f8f644", "tabbable": null, "tooltip": null}}, "e0c73a9b69d44abbba1f465b2b4de09d": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e52d674dce684792a207ad061a75f7cd": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ea2c51017f7d44b5bbc44d697f0f04ef": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "f1cb0512d0cd407584b277ec150eb829": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_92fc1d0cc28140668d9a17e11496bfb1", "placeholder": "\u200b", "style": "IPY_MODEL_8c5d66f8ec6e406b82128a89ce50f4e6", "tabbable": null, "tooltip": null, "value": "100%"}}, "f8847563ef694f3da9b694d710055c35": {"model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_28bcb558451e48098b6d60c646c7313a", "max": 45.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_ea2c51017f7d44b5bbc44d697f0f04ef", "tabbable": null, "tooltip": null, "value": 45.0}}}, "version_major": 2, "version_minor": 0}
</script></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to ronswanson’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../api/API.html" class="btn btn-neutral float-right" title="API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, J. Michael Burgess.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>